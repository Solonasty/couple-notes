<div class="page">
  <div class="page-header">
    <header class="page-header__row">
      <div class="page-header__title">
        <h1 class="page-header__h1">{{ greetingTitle() }}</h1>
      </div>
    </header>
  </div>
  <div class="card">
    <div class="section">
      <h2 class="section-title">E-mail</h2>
      <div class="email">{{ accountEmail() }}</div>
    </div>

    @if (error()) {
      <div class="form-error" role="alert">{{ error() }}</div>
    }

    @if (ok()) {
      <div class="form-ok" role="status">{{ ok() }}</div>
    }

    <form class="section form-block" [formGroup]="nameForm" (ngSubmit)="saveName()">
      <h2 class="section-title">Имя</h2>

      <ui-input
        formControlName="name"
        type="text"
        placeholder="Имя"
        autocomplete="name">
      </ui-input>

      <ui-button
      class="ui-btn--h56 ui-btn--no-dim"
      [full]="true"
      variant="primary"
      type="submit"
      [disabled]="nameForm.invalid || savingName()"
      [loading]="savingName()">
      СОХРАНИТЬ
    </ui-button>
    </form>

    <form class="section form-block" [formGroup]="passwordForm" (ngSubmit)="changePassword()">
      <h2 class="section-title">Пароль</h2>

      <div class="fields">
        <ui-input
          formControlName="currentPassword"
          type="password"
          placeholder="Текущий пароль"
          autocomplete="current-password">
        </ui-input>

        <ui-input
          formControlName="newPassword"
          type="password"
          placeholder="Новый пароль"
          autocomplete="new-password">
        </ui-input>
      </div>

      <ui-button
        class="ui-btn--h56 ui-btn--no-dim"
        [full]="true"
        variant="primary"
        type="submit"
        [disabled]="passwordForm.invalid || savingPassword()"
        [loading]="savingPassword()">
        <span>СОХРАНИТЬ</span>
      </ui-button>
    </form>
  </div>
</div>