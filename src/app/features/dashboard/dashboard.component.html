<mat-card>
  <mat-card-content>

    @if (error()) { <div class="error">{{ error() }}</div> }
    @if (ok()) { <div class="ok">{{ ok() }}</div> }

    <h3>Профиль</h3>

    <form [formGroup]="profileForm" (ngSubmit)="saveName()">
      <mat-form-field appearance="outline" class="full">
        <mat-label>Имя</mat-label>
        <input matInput formControlName="name" autocomplete="name" />
      </mat-form-field>

      <div class="full" style="margin: 8px 0;">
        Email: <b>{{ user()?.email }}</b>
      </div>

      <button mat-raised-button color="primary"
              type="submit"
              [disabled]="profileForm.invalid || saving()">
        Сохранить имя
      </button>
    </form>

    <hr style="margin: 16px 0;" />

    <h3>Сменить email</h3>
    <form [formGroup]="emailForm" (ngSubmit)="changeEmail()">
      <mat-form-field appearance="outline" class="full">
        <mat-label>Новый email</mat-label>
        <input matInput formControlName="newEmail" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full">
        <mat-label>Текущий пароль</mat-label>
        <input matInput type="password" formControlName="currentPassword" />
      </mat-form-field>

      <button mat-raised-button color="primary"
              type="submit"
              [disabled]="emailForm.invalid || saving()">
        Обновить email
      </button>
    </form>

    <hr style="margin: 16px 0;" />

    <h3>Сменить пароль</h3>
    <form [formGroup]="passwordForm" (ngSubmit)="changePassword()">
      <mat-form-field appearance="outline" class="full">
        <mat-label>Текущий пароль</mat-label>
        <input matInput type="password" formControlName="currentPassword" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="full">
        <mat-label>Новый пароль</mat-label>
        <input matInput type="password" formControlName="newPassword" />
      </mat-form-field>

      <button mat-raised-button color="primary"
              type="submit"
              [disabled]="passwordForm.invalid || saving()">
        Обновить пароль
      </button>
    </form>

  </mat-card-content>
</mat-card>
