<mat-card>
  <mat-card-content>
    <h3>Пара</h3>

    @if (error()) { <div class="error">{{ error() }}</div> }
    @if (ok()) { <div class="ok">{{ ok() }}</div> }

    <h4 style="margin-top: 12px;">Приглашения</h4>

    @if (incomingInvites().length === 0) {
      <p>Нет приглашений</p>
    } @else {
      @for (inv of incomingInvites(); track inv.id) {
        <div style="display:flex; gap:12px; align-items:center; margin:8px 0;">
          <div style="flex:1;">
            От: <b>{{ inv.fromEmail }}</b>
          </div>

          <button mat-raised-button color="primary"
                  [disabled]="saving()"
                  (click)="acceptInvite(inv.id)">
            Принять
          </button>

          <button mat-button
                  [disabled]="saving()"
                  (click)="declineInvite(inv.id)">
            Отклонить
          </button>
        </div>
      }
    }

    <hr style="margin: 16px 0;" />

    <h4>Пригласить партнёра</h4>
    <form [formGroup]="pairForm" (ngSubmit)="createInvite()">
      <mat-form-field appearance="outline" class="full">
        <mat-label>Email партнёра</mat-label>
        <input matInput formControlName="partnerEmail" autocomplete="email" />
      </mat-form-field>

      <button mat-raised-button color="primary"
              type="submit"
              [disabled]="pairForm.invalid || saving()">
        Отправить приглашение
      </button>
    </form>
  </mat-card-content>
</mat-card>
